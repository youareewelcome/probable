<view class="container-full">
  <van-notify id="van-notify"></van-notify>

  <scroll-view scroll-y class="scrollPage">
    <view class="UCenter-bg" style="background-image:url({{ defaultUserCoverImagePath }})">
      <view wx:if="{{ appGlobalData.isAuth }}" class="text-center">
        <image src="{{ appGlobalData.userInfo.avatar }}" class="png" mode="widthFix" style="border-radius:50%;"></image>
        <view class="text-xl margin-top-sm">{{ appGlobalData.userInfo.nickname }}</view>
        <view class="margin-top-sm" wx:if="{{ appGlobalData.userInfo.bio }}"><text>{{ appGlobalData.userInfo.bio }}</text></view>
      </view>
      <view wx:else class="text-center">
        <image bind:tap="needAuth" src="/assets/images/users/default-avatar.jpg" class="png" mode="widthFix" style="border-radius:50%;"></image>
        <view bind:tap="needAuth" class="text-xl margin-top-sm">请登录</view>
      </view>
      <image src="{{ defaultProfileWaveImagePath }}" mode="scaleToFill" class="gif-wave"></image>
    </view>

    <view class="padding flex text-center text-grey bg-white shadow-warp">
      <view class="flex flex-sub flex-direction solid-right">
        <view class="text-xxl text-orange">{{ appGlobalData.isAuth ? appGlobalData.userInfo.post_num : 0}}</view>
        <view class="margin-top-sm">
          <text class="cuIcon-newsfill"></text> 动态
        </view>
      </view>
      <view class="flex flex-sub flex-direction solid-right">
        <view class="text-xxl text-green">{{ appGlobalData.isAuth ? appGlobalData.userInfo.got_post_comment_num : 0 }}</view>
        <view class="margin-top-sm">
          <text class="cuIcon-commentfill"></text> 评论
        </view>
      </view>
      <view class="flex flex-sub flex-direction">
        <view class="text-xxl text-blue">{{ appGlobalData.isAuth ? appGlobalData.userInfo.got_post_thumb_up_num : 0 }}</view>
        <view class="margin-top-sm">
          <text class="cuIcon-appreciatefill"></text> 被赞
        </view>
      </view>
    </view>

    <view class="cu-list menu card-menu margin-top-xl margin-bottom-xl shadow-lg radius">
      <navigator wx:if="{{ appGlobalData.isAuth }}" open-type="switchTab" url="/pages/messages/index/index" class="cu-item arrow">
        <view class="content">
          <text class="cuIcon-notice text-green"></text>
          <text class="text-grey">通知</text>
        </view>
        <view class="action" wx:if="{{ appGlobalData.userInfo.unread_notice_num }}">
          <!--
            <view class="cu-avatar-group">
              <view class="cu-avatar round sm" style="background-image:url(https://ossweb-img.qq.com/images/lol/web201310/skin/big10004.jpg);"></view>
              <view class="cu-avatar round sm" style="background-image:url(https://ossweb-img.qq.com/images/lol/web201310/skin/big10003.jpg);"></view>
              <view class="cu-avatar round sm" style="background-image:url(https://ossweb-img.qq.com/images/lol/web201310/skin/big10002.jpg);"></view>
              <view class="cu-avatar round sm" style="background-image:url(https://ossweb-img.qq.com/images/lol/web201310/skin/big10001.jpg);"></view>
            </view>
          -->
          <text class="text-red text-sm">{{ appGlobalData.userInfo.unread_notice_num }} 条未读</text>
        </view>
        <view class="action" wx:else>
          <text class="text-grey text-sm">无通知</text>
        </view>
      </navigator>

      <navigator wx:else open-type="navigate" url="/pages/users/auth/index" class="cu-item arrow">
        <view class="content">
          <text class="cuIcon-notice text-green"></text>
          <text class="text-grey">通知</text>
        </view>
        <view class="action">
          <text class="text-grey text-sm">无通知</text>
        </view>
      </navigator>
    </view>

    <view wx:if="{{ false }}" class="cu-list menu card-menu margin-top-xl margin-bottom-xl shadow-lg radius">
      <view class="cu-item arrow">
        <view class="content">
          <text class="cuIcon-profile text-blue"></text>
          <text class="text-grey">我的资料</text>
        </view>
      </view>
      <view class="cu-item arrow">
        <view class="content">
          <text class="cuIcon-news text-blue"></text>
          <text class="text-grey">我的动态</text>
        </view>
      </view>
      <view class="cu-item arrow">
        <view class="content">
          <text class="cuIcon-comment text-blue"></text>
          <text class="text-grey">我的评论</text>
        </view>
      </view>
      <view class="cu-item arrow">
        <view class="content">
          <text class="cuIcon-appreciate text-blue"></text>
          <text class="text-grey">我的点赞</text>
        </view>
      </view>
    </view>

    <view class="cu-list menu card-menu margin-top-xl margin-bottom-xl shadow-lg radius">
      <button class="cu-item arrow" bind:tap="gotoHeyCommunityPage">
        <view class="content">
          <text class="cuIcon-github text-grey"></text>
          <text class="text-grey">HEY社区</text>
        </view>
        <view class="action">
          <text class="text-gray text-sm">免费开源</text>
        </view>
      </button>
      <button class="cu-item arrow" open-type="contact">
        <view class="content">
          <text class="cuIcon-servicefill text-green"></text>
          <text class="text-grey">联系客服</text>
        </view>
      </button>
      <button class="cu-item arrow" open-type="feedback">
        <view class="content">
          <text class="cuIcon-writefill text-cyan"></text>
          <text class="text-grey">意见反馈</text>
        </view>
      </button>
    </view>

    <view class="cu-list menu card-menu margin-top-xl margin-bottom-xl shadow-lg radius">
      <view class="cu-item arrow" style="display:none;">
        <view class="content">
          <text class="cuIcon-evaluate text-blue"></text>
          <text class="text-grey">用户协议</text>
        </view>
      </view>

      <view wx:if="{{ appGlobalData.isAuth }}" class="cu-item text-center" bind:tap="logoutHandler">
        <view class="content">
          <text class="cuIcon-exit text-red"></text>
          <text class="text-red">退出登录</text>
        </view>
      </view>
      <view wx:else class="cu-item text-center" bind:tap="needAuth">
        <view class="content">
          <text class="cuIcon-profile text-blue"></text>
          <text class="text-blue">登录</text>
        </view>
      </view>
    </view>

    <view id="section-copyright" class="padding-bottom-xl padding-top-lg">
      <view class="text-center text-gray" bind:tap="gotoHeyCommunityPage">
        <view wx:if="{{ wxAppAccountInfo.miniProgram.envVersion === 'release' }}">HeyCommunity V{{ wxAppAccountInfo.miniProgram.version }}</view>
        <view wx:else >HeyCommunity {{ wxAppAccountInfo.miniProgram.envVersion }}</view>
        <view>Created by supeRodv2 at ProtobiaTech</view>
      </view>
    </view>
  </scroll-view>
</view>