<view class="container-full page-messages-index">
  <view wx:if="{{ notices.length }}" class="items-message cu-list menu-avatar">
    <view class="item-message cu-item {{ notice.is_read ? 'read' : 'unread' }} {{ messageTouchClass == 'item-message-' + index ? 'move-cur' : '' }}" data-target="item-message-{{ index }}"
          wx:for="{{ notices }}" wx:for-item="notice" wx:key="id"
          bind:touchstart="messageTouchStart" bind:touchmove="messageTouchMove" bind:touchend="messageTouchEnd">
      <view class="date text-grey text-xs">{{ notice.created_at_for_humans }}</view>
      <view class="avatar cu-avatar round lg" style="background-image:url({{ notice.sender.avatar }});">
        <view wx:if="{{ ! notice.is_read }}" class="cu-tag badge">未读</view>
      </view>
      <view class="content padding-bottom-xs solid-bottom">
        <view class="text-grey">
          <view class="nickname">{{ notice.sender.nickname }}</view>
          <view wx:if="{{ notice.type === 'post_thumb_up' }}" class="message-action margin-left-xs text-gray">点赞你的动态</view>
          <view wx:if="{{ notice.type === 'post_comment' }}" class="message-action margin-left-xs text-gray">评论你的动态</view>
        </view>
        <view class="text-gray text-sm flex">
          <text class="text-cut">{{ notice.content }}</text>
        </view>
      </view>
      <view class="move">
        <view wx:if="{{ notice.is_read }}" bind:tap="noticeSetUnRead" data-id="{{ notice.id }}" data-index="{{ index }}" class="bg-grey">标为未读</view>
        <view wx:else bind:tap="noticeSetIsRead" data-id="{{ notice.id }}" data-index="{{ index }}" class="bg-blue">标为已读</view>
        <view bind:tap="noticeDelete" data-id="{{ notice.id }}" data-index="{{ index }}" class="bg-red">删除</view>
      </view>
    </view>
  </view>

  <view wx:else style="padding-top:100px;">
    <van-empty wx:if="{{ appGlobalData.isAuth }}" description="没有消息"></van-empty>
    <van-empty wx:else description="登录后才能查看消息"></van-empty>
  </view>
</view>
